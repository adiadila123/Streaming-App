{% extends 'base.html' %}

{% block content %}
<style>
    footer {
        position: absolute;
        bottom: 0;
        width: 100%;
    }
</style>
<div class="container my-5">
<div class="clearfix mt-4"></div>
    <div class="row">
        <div class="col-md-6">
            <h3>Movies</h3>
            {% for movie in results.movies %}
                <div class="card img-fluid mb-2">
                    <img src="{{ movie.image_url }}" class="card-img-top" alt="{{ movie.title }}">
                    <div class="card-img-overlay text-center bg-dark">
                        <h4 class="card-title">{{ movie.title }}</h4>
                        <a href="{% url 'movie_detail' movie.id %}" class="btn btn-outline-primary">Play</a>
                        <a class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#thrillerModal{{ movie.id }}">Trailer</a>
                    </div>
                </div>
                <!-- Movies Modal -->
                <div class="modal fade bg-dark" id="thrillerModal{{ movie.id }}" tabindex="-1" aria-labelledby="thrillerModalLabel{{ movie.id }}" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content p-2 bg-transparent">
                            <div class="modal-header">
                                <h5 class="modal-title text-white" id="thrillerModalLabel{{ movie.id }}">Thriller for {{ movie.title }}</h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="embed-responsive embed-responsive-16by9">
                                    <iframe id="myIframe{{ movie.id }}" class="embed-responsive-item" width="100%" height="450" src="{{ movie.trailer_url }}"></iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% empty %}
                <p>No movies found.</p>
            {% endfor %}
        </div>

        <div class="col-md-6">
            <h3>Series</h3>
            {% for series in results.series.all %}
                <div class="card img-fluid mb-2">
                    <img src="{{ series.image_url }}" alt="{{ series.title }}">
                    <div class="card-img-overlay text-center bg-dark">
                        <h4 class="card-title">{{ series.title }}</h4>
                        <a href="{% url 'series_detail' series.id %}" class="btn btn-outline-primary">Play</a>
                        <a class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#thrillerModal{{ series.id }}">Trailer</a></div>
                </div>
                <!-- Series Modal -->
                <div class="modal fade bg-dark" id="thrillerModal{{ series.id }}" tabindex="-1" aria-labelledby="thrillerModalLabel{{ series.id }}" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content p-2 bg-transparent">
                            <div class="modal-header">
                                <h5 class="modal-title text-white" id="thrillerModalLabel{{ series.id }}">Thriller for {{ series.title }}</h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="embed-responsive embed-responsive-16by9">
                                    <iframe id="myIframe{{ series.id }}" class="embed-responsive-item" width="100%" height="450" src="{{ series.trailer_url }}"></iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% empty %}
                <p>No series found.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
